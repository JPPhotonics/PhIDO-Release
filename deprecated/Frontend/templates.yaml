TEMPLATE_wdd0:
  title: |
    Wavelength Division Demultiplexer with 1 input port and 4 output ports. In this context, number of output ports sets the number of channels.
  description: |
    A 1-to-4 wavelength (de-)multiplexer designed using a binary tree of cascaded Mach-Zehnder-like
    lattice filters. This device is engineered to function as a coarse wavelength division multiplexing (cWDM)
    filter for optical data communication.
  reference: https://opg.optica.org/oe/fulltext.cfm?uri=oe-21-10-11652&id=253305
  nodes:
    N1: a 1x2 Mach-Zehnder interferometer (MZI)
    N2: a 1x2 Mach-Zehnder interferometer (MZI)
    N3: a 1x2 Mach-Zehnder interferometer (MZI)
  edges:
    - N1,o2:N2,o1
    - N1,o3:N3,o1
  spec:
    wavelengths_nanometer: [1305, 1306, 1307, 1308]
  ports: 1x4

CIRCUIT_wdd0:
  title: |
    Wavelength Division Demultiplexer with 1 input port and 4 output ports. In this context, number of output ports sets the number of channels.
  description: |
    A 1-to-4 wavelength (de-)multiplexer designed using a binary tree of cascaded Mach-Zehnder-like
    lattice filters. This device is engineered to function as a coarse wavelength division multiplexing (cWDM)
    filter for optical data communication.
  reference: https://opg.optica.org/oe/fulltext.cfm?uri=oe-21-10-11652&id=253305
  nodes:
    N1:
      name: mzi_1x2_heater_tin_cband
      args:
        delta_length: 200
    N2:
      name: mzi_1x2_heater_tin_cband
      args:
        delta_length: 100
    N3:
      name: mzi_1x2_heater_tin_cband
      args:
        delta_length: 100
  edges:
    - N1,o2:N2,o1
    - N1,o3:N3,o1
  spec:
    wavelengths_nanometer: [1305, 1306, 1307, 1308]
  ports: 1x4




TEMPLATE_wdm_style1:
  title: Wavelength Division Multiplexer (WDM) (not Demultiplexer) or similar, with 3 or 4 channels/inputs/ports, for any wavelength
  description: This is instructions for a Wavelength Division Multiplexer (WDM).
  reference:
  nodes:
    N1: mzi_2x2_heater_tin_cband (delta_length=100)
    N2: mzi_2x2_heater_tin_cband (delta_length=100)
    N3: mzi_2x2_heater_tin_cband (delta_length=200)
  edges:
    - N1,o4:N3,o2
    - N2,o3:N3,o1
  ports: 4x2

# TEMPLATE_wdm_style2:
#   title: Wavelength Division Multiplexer (WDM) (not Demultiplexer) or similar, with 3 or 4 channels/inputs/ports, for any wavelength
#   description: This is instructions for a Wavelength Division Multiplexer (WDM).
#   reference:
#   instructions: |
#     ingridients:
#       C1:
#         type: mzi_2x2_heater_tin_cband
#         delta_length: 100
#       C2:
#         type: mzi_2x2_heater_tin_cband
#         delta_length: 100
#       C3:
#         type: mzi_2x2_heater_tin_cband
#         delta_length: 200

#     connections:
#       C1,o3:C2,o1
#       C1,o4:C3,o2

TEMPLATE_mzi_2x2_heater_tin_cband:
  title: MZI 2x2 - Thermo-optic
  description: This is a 2x2 Mach-Zehnder interferometer (MZI). Integrated in both arms of the MZI are TiN Heaters.
  ports: 2x2
  nodes:
    N1: _mmi2x2
    N2: heater_tin_cband
    N3: heater_tin_cband
  edges:
    - N1,o3:N2,o1
    - N1,o4:N3,o1
  spec:
    center_wavelength_nanometer: 1310
    fsr_nanometer: 10




TEMPLATE_transceiver0:
  title: transceiver, with any number of channels or outputs ports, for any wavelength
  nodes:
    N1:
      name: TEMPLATE_wdd0
    N2:
      name: mzi_1x1_pindiode_cband
    N3:
      name: mzi_1x1_pindiode_cband
    N4:
      name: mzi_1x1_pindiode_cband
    N5:
      name: mzi_1x1_pindiode_cband
  edges:
      # info: N1 has four output ports, connect them to the four mzis
    - N1,o2:N2,o1
    - N1,o3:N3,o1
    - N1,o4:N4,o1
    - N1,o5:N5,o1
  spec:
  ports: 1x4

# TEMPLATE_transceiver1:
#   title: transceiver, with any number of channels or outputs ports, for any wavelength
#   nodes:
#     C1:
#       name: Wavelength Division Demultiplexer with 3 or 4 channels/outputs/ports
#       conn: it has four output ports, connect them to the four mzis
#       nodes:
#         C1_1:
#           name: mzi_2x2_heater_tin_cband
#           infor: delta_length 200
#         C1_2:
#           name: mzi_2x2_heater_tin_cband
#           info: delta_length 100
#         C1_3:
#           name: mzi_2x2_heater_tin_cband
#           info: delta_length 100
#         info: here are the connections [C1_1,o3:C1_2,o1] and [C1_1,o4:C1_3,o2]
#     C2:
#       name: mzi_1x1_pindiode_cband
#     C3:
#       name: mzi_1x1_pindiode_cband
#     C4:
#       name: mzi_1x1_pindiode_cband
#     C5:
#       name: mzi_1x1_pindiode_cband
#   info:



# TEMPLATE_transceiver_unpacked:
#   title: transceiver or similar, with any number of channels or outputs ports, for any wavelength
#   instructions: |
#     This is instructions for transceiver.

#     Take three mzi_2x2_heater_tin_cband (M0_1 with length=100) (M0_2 with length=110) (M0_3 with length=120).
#     Also take three mzi_2x2_heater_tin_cband (D0_1 with length=100) (D0_2 with length=110) (D0_3 with length=120).
#     Also take four mzi_1x1_pindiode_cband (MZM_1, MZM_2, MZM_3, MZM_4).

#     Connect ONE output port of M0_1 to ONE input port of M0_3.
#     Connect ONE output port of M0_2 to the OTHER input port of M0_3.

#     Connect ONE output port of M0_3 to ONE input port of D0_1.

#     Connect ONE output port of D0_1 to ONE input port of D0_2.
#     Connect the OTHER output port of D0_1 to the ONE input port D0_3.

#     Connect one output port of D0_2 to (port o1) of MZM_1 .
#     Connect the other output port of D0_2 to (port o1) of MZM_2.
#     Connect one output port of D0_3 to (port o1) of MZM_3.
#     Connect the other output port of D0_3 to (port o1) of MZM_4.


# wdd1:
#   description: Wavelength Division Demultiplexer with 3 or 4 channels/outputs/ports
#   how: |
#     This is instructions for a Wavelength Division Demultiplexer with 3 or 4 channels/outputs/ports.
#     Take three mzi_2x2_heater_tin_cband:
#       - mzi1 with delta_length=200
#       - mzi2 with delta_length=100
#       - mzi3 with delta_length=100
#     Connect ONE output port of mzi1 to ONE input port of mzi2.
#     Connect the OTHER output port of mzi1 to the ONE input port of mzi3.

# wdd111:
#   description: Wavelength Division Demultiplexer with 3 or 4 channels/outputs/ports
#   instructions:
#     ingridients:
#       C1:
#         type: 2x2 MZI
#         delta_length: 200
#       C2:
#         type: 2x2 MZI
#         delta_length: 100
#       C3:
#         type: 2x2 MZI
#         delta_length: 100

#     connections:
#       C1,o2:C2,i1
#       C1,o1:C3,i1


# wdd2:
#   what: Wavelength Division Demultiplexer with 5 to 8 channels/outputs/ports
#   how: |
#     This is instructions for a Wavelength Division Demultiplexer with 5, 6, 7, or 8 channels/outputs/ports.
#     Take one mzi_2x2_heater_tin_cband (mzi1) and set delta_length=100.
#     Connect mzi1 to two mzi_2x2_heater_tin_cband (mzi2 and mzi3) with delta_lengths set to 110 and 120, respectively.
#     Connect the output ports of mzi2 and mzi3 to four mzi_2x2_heater_tin_cband (mzi4, mzi5, mzi6, and mzi7) with delta_lengths set to 130, 140, 150, and 160.


# wdd:
#   what: Wavelength Division Demultiplexer (not multiplexer aka WDM) or similar, with any number of channels or outputs ports, for any wavelength
#   how: |
#     This is instructions for a Wavelength Division Demultiplexer.
#     If asked for with 3 or 4 channels/outputs/ports:
#     Take three mzi_2x2_heater_tin_cband (mzi1 with delta_length=200) (mzi2 with delta_length=100) (mzi3 with delta_length=100).
#     Connect ONE output port of mzi1 to ONE input port of mzi2.
#     Connect the OTHER output port of mzi1 to the ONE input port mzi3.

#     If asked for 5, 6, 7, or 8 channels/outputs/ports:
#     connect a mzi_2x2_heater_tin_cband (let's name it mzi1 for now) (set delta_length to 100) to
#     two mzi_2x2_heater_tin_cband (mzi2 and mzi3) (set delta_lengths to 110 and 120),
#     then connect output ports of (mzi2 and mzi3) to four mzi_2x2_heater_tin_cband (mzi4, mzi5, mzi6, and mzi7) (set delta_lengths to 130, 140, 150, and 160).

#     If asked for any other number of channels/outputs/ports:
#     follow instructions for 3 or 4 channels.

# wdm:
#   what: Wavelength Division Multiplexer (WDM) (not Demultiplexer) or similar, with any number of channels or outputs ports, for any wavelength
#   how: |
#     This is instructions for a Wavelength Division Multiplexer (WDM).
#     If asked for with 3 or 4 channels/inputs/ports:
#     Take three mzi_2x2_heater_tin_cband (mzi1 with length=100) (mzi2 with length=110) (mzi3 with length=120).
#     Connect ONE output port of mzi1 to ONE input port of mzi3.
#     Connect ONE output port of mzi2 to the OTHER input port of mzi3.

#     If asked for 5, 6, 7, or 8 channels/inputs/ports:
#     Take seven mzi_2x2_heater_tin_cband (mzi1 with length=100) (mzi2 with length=110) (mzi3 with length=120)
#     (mzi4 with length=130) (mzi5 with length=140) (mzi6 with length=150) (mzi7 with length=160).
#     Connect ONE output port of mzi1 to ONE input port of mzi2.
#     Connect the OTHER output port of mzi1 to ONE input port of mzi3.
#     Connect ONE output port of mzi2 to ONE input port of mzi4.
#     Connect the OTHER output port of mzi2 to ONE input port of mzi5.
#     Connect ONE output port of mzi3 to ONE input port of mzi6.
#     Connect the OTHER output port of mzi3 to ONE input port of mzi7.

#     If asked for any other number of channels/inputs/ports:
#     follow instructions for 3 or 4 channels.

# transceiver:
#   what: transceiver or similar, with any number of channels or outputs ports, for any wavelength
#   how: |
#     This is instructions for transceiver.

#     Take three mzi_2x2_heater_tin_cband (M0_1 with length=100) (M0_2 with length=110) (M0_3 with length=120).
#     Also take three mzi_2x2_heater_tin_cband (D0_1 with length=100) (D0_2 with length=110) (D0_3 with length=120).
#     Also take four mzi_1x1_pindiode_cband (MZM_1, MZM_2, MZM_3, MZM_4).

#     Connect ONE output port of M0_1 to ONE input port of M0_3.
#     Connect ONE output port of M0_2 to the OTHER input port of M0_3.

#     Connect ONE output port of M0_3 to ONE input port of D0_1.

#     Connect ONE output port of D0_1 to ONE input port of D0_2.
#     Connect the OTHER output port of D0_1 to the ONE input port D0_3.

#     Connect one output port of D0_2 to (port o1) of MZM_1 .
#     Connect the other output port of D0_2 to (port o1) of MZM_2.
#     Connect one output port of D0_3 to (port o1) of MZM_3.
#     Connect the other output port of D0_3 to (port o1) of MZM_4.

# connect a WDM (label it wdm1) to four mzi_1x1_pindiode_cband (mzi1, mzi2, mzi3, mzi4).

# switch_netwotk: |
#   text

# test_devices: |
#   text
